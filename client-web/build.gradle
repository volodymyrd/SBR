def sourceBuildDir = 'build'
def targetBuildDir = '../client/src/main/resources/static/build'

task cleanBuild() {
    doFirst {
        println('Starting "cleanBuild" task...: deleting "build" folders...')
        delete sourceBuildDir
        delete targetBuildDir
    }
}

clean.dependsOn cleanBuild

task copyBuild(type: Copy) {
    doFirst {
        println('copying "build" folder')
    }
    from sourceBuildDir
    into targetBuildDir
}

task npmRun(type: Exec) {
    doFirst {
        println('Run npm build')
        commandLine 'npm', 'run', 'build'
    }
}

npmRun.finalizedBy(copyBuild)
